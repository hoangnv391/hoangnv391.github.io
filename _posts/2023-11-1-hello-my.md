---
layout: post
title: Ngoại lệ và ngắt trong lập trình nhúng
categories: embedded
---

*Ngoại lệ và ngắt là một phần rất quan trọng trong lập trình nhúng. Trong bài viết này, hãy cùng mình tìm hiểu sơ lược về chúng.*  
![_config.yml]({{ site.baseurl }}/images/interrupt.png)
# I.Tổng quan về ngoại lệ/ngắt
## 1. Ngoại lệ và ngắt (Exception and Interrupt)
Trong bài viết, mình sẽ chỉ sử dụng từ "ngắt", "ngoại lệ" - với bản chất giống như ngắt, chỉ là có một chút khác biệt, mình sẽ giải thích sự khác biệt đó ở phía dưới.

Ngắt thường được tạo ra bởi phần cứng, như các ngoại vi hoặc các chân đầu vào của GPIO, trong một số trường hợp, ngắt cũng có thể được tạo ra bởi phần mềm. Trong lập trình nhúng, nếu muốn xử lý một sự kiện ngắt thì cần có một hàm riêng để xử lý ngắt, hàm đó còn được gọi là Interrupt Service Routines (ISR).  
Vậy còn ngoại lệ thì sao?. Giống như ngắt, ngoại lệ cũng được tạo ra bởi phần cứng, chỉ có khác biệt là, phần cứng ở đây chính là bộ xử lý. Ngoại lệ thường xảy ra khi chương trình gặp lỗi về logic toán học (ví dụ: chia cho 0, sẽ gây ra rỗi MemFault) hoặc khi cấu hình sai ở những phần cứng mà bộ xử lý muốn truy cập (ví dụ: khi chưa cấp clock cho một ngoại vi, mà bộ xử lý cố truy cập vào các thanh ghi ở ngoại vi đó, sẽ dẫn đến lỗi transfer error, là một dạng của BusFault).
## 2. Nested Vector Interrupt Controller (NVIC)


